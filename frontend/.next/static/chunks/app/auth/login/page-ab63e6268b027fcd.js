(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[716],{8911:function(e,t,a){Promise.resolve().then(a.bind(a,1202))},9376:function(e,t,a){"use strict";var s=a(5475);a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})},1202:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return c}});var s=a(7437),r=a(2265),n=a(4362),i=a(9376),o=a(9501);function c(){let{login:e}=(0,n.a)(),t=(0,i.useRouter)(),[a,c]=(0,r.useState)(!1),{register:l,handleSubmit:d,formState:{errors:u}}=(0,o.cI)(),m=async a=>{try{c(!0),await e(a),t.push("/")}catch(e){}finally{c(!1)}};return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[(0,s.jsxs)("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[(0,s.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to SDMS"}),(0,s.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Student Database Management System"})]}),(0,s.jsx)("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:(0,s.jsxs)("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[(0,s.jsxs)("form",{className:"space-y-6",onSubmit:d(m),children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email address"}),(0,s.jsxs)("div",{className:"mt-1",children:[(0,s.jsx)("input",{...l("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),type:"email",className:"input",placeholder:"Enter your email"}),u.email&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:u.email.message})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,s.jsxs)("div",{className:"mt-1",children:[(0,s.jsx)("input",{...l("password",{required:"Password is required"}),type:"password",className:"input",placeholder:"Enter your password"}),u.password&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:u.password.message})]})]}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{type:"submit",disabled:a,className:"btn btn-primary w-full",children:a?"Signing in...":"Sign in"})})]}),(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,s.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,s.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,s.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"Don't have an account?"})})]}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsx)("button",{onClick:()=>t.push("/auth/register"),className:"btn btn-secondary w-full",children:"Register here"})})]})]})})]})}},4362:function(e,t,a){"use strict";a.d(t,{AuthProvider:function(){return c},a:function(){return l}});var s=a(7437),r=a(2265),n=a(1837),i=a(9064);let o=(0,r.createContext)(void 0);function c(e){let{children:t}=e,[a,c]=(0,r.useState)(null),[l,d]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=localStorage.getItem("token"),t=localStorage.getItem("user");if(e&&t)try{let a=JSON.parse(t);c({...a,token:e})}catch(e){localStorage.removeItem("token"),localStorage.removeItem("user")}d(!1)},[]);let u=async e=>{try{d(!0);let t=await n.iJ.login(e),a={...t.user,token:t.token};c(a),localStorage.setItem("token",t.token),localStorage.setItem("user",JSON.stringify(t.user)),i.ZP.success("Login successful!")}catch(e){var t,a;throw i.ZP.error((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"Login failed"),e}finally{d(!1)}},m=async e=>{try{d(!0),await n.iJ.register(e),i.ZP.success("Registration successful! Please login.")}catch(e){var t,a;throw i.ZP.error((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"Registration failed"),e}finally{d(!1)}};return(0,s.jsx)(o.Provider,{value:{user:a,loading:l,login:u,register:m,logout:()=>{c(null),localStorage.removeItem("token"),localStorage.removeItem("user"),i.ZP.success("Logged out successfully")},isAuthenticated:!!a,hasRole:e=>!!a&&e.includes(a.role)},children:t})}function l(){let e=(0,r.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},1837:function(e,t,a){"use strict";a.d(t,{Aw:function(){return o},BT:function(){return l},Hc:function(){return n},Wp:function(){return c},iJ:function(){return r},vd:function(){return i}});let s=a(3464).Z.create({baseURL:"http://127.0.0.1:8787",headers:{"Content-Type":"application/json"}});s.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),s.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("token"),window.location.href="/auth/login"),Promise.reject(e)});let r={login:async e=>(await s.post("/auth/login",e)).data,register:async e=>(await s.post("/auth/register",e)).data},n={uploadCertificate:async e=>{let t=new FormData;return t.append("file",e.file),(await s.post("/certificates/upload?user_id=".concat(e.user_id,"&title=").concat(encodeURIComponent(e.title),"&issued_date=").concat(e.issued_date),t,{headers:{"Content-Type":"application/pdf"}})).data},getUserCertificates:async e=>(await s.get("/users/".concat(e,"/certificates"))).data,downloadCertificate:async e=>(await s.get("/certificates/".concat(e,"/download"),{responseType:"blob"})).data,deleteCertificate:async e=>(await s.delete("/certificates/".concat(e))).data,reviewCertificate:async(e,t,a)=>(await s.put("/certificates/".concat(e,"/review"),{status:t,rejection_reason:a})).data},i={getEvents:async()=>({events:(await s.get("/api/events")).data}),createEvent:async e=>{let t=await s.post("/api/faculty/events",e);return{event:{...e,id:t.data.eventId}}}},o={getWorkshops:async()=>{try{return{workshops:(await s.get("/api/workshops")).data}}catch(e){return{workshops:[]}}},createWorkshop:async(e,t)=>{let a=await s.post("/api/faculty/workshops?eventId=".concat(e),t);return{workshop:{...t,id:a.data.workshopId,event_id:e}}}},c={getUserPoints:async e=>{let t=await s.get("/api/analytics/user?userId=".concat(e));return{total_points:t.data.data.totalPoints,entries:t.data.data.pointsHistory}},addPoints:async(e,t,a)=>(await s.post("/api/admin/award-points",{userId:e,points:t,reason:a})).data},l={getNotifications:async e=>(await s.get("/api/notifications/".concat(e))).data,markAsRead:async e=>(await s.put("/api/notifications/".concat(e,"/read"))).data,markAllAsRead:async e=>(await s.put("/api/notifications/".concat(e,"/read-all"))).data,getPreferences:async e=>(await s.get("/api/notifications/".concat(e,"/preferences"))).data,updatePreferences:async(e,t)=>(await s.put("/api/notifications/".concat(e,"/preferences"),t)).data}}},function(e){e.O(0,[707,501,971,117,744],function(){return e(e.s=8911)}),_N_E=e.O()}]);